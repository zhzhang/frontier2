{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/jordan/graphql-nextjs/pages/p/[id].tsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport Layout from '../../components/Layout';\nimport Router, { useRouter } from 'next/router';\nimport { withApollo } from '../../apollo/client';\nimport gql from 'graphql-tag';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\nconst PostQuery = gql`\n  query PostQuery($postId: String!) {\n    post(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`;\nconst PublishMutation = gql`\n  mutation PublishMutation($postId: String!) {\n    publish(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`;\nconst DeleteMutation = gql`\n  mutation DeleteMutation($postId: String!) {\n    deletePost(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`;\n\nfunction Post() {\n  const postId = useRouter().query.id;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(PostQuery, {\n    variables: {\n      postId\n    }\n  });\n  const [publish] = useMutation(PublishMutation);\n  const [deletePost] = useMutation(DeleteMutation);\n\n  if (loading) {\n    console.log('loading');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading ...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (error) {\n    console.log('error');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Error: \", error.message]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 12\n    }, this);\n  }\n\n  console.log(`response`, data);\n  let title = data.post.title;\n\n  if (!data.post.published) {\n    title = `${title} (Draft)`;\n  }\n\n  const authorName = data.post.author ? data.post.author.name : 'Unknown author';\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"jsx-3440979688\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"jsx-3440979688\",\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-3440979688\",\n        children: [\"By \", authorName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"jsx-3440979688\",\n        children: data.post.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), !data.post.published && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async e => {\n          await publish({\n            variables: {\n              postId\n            }\n          });\n          Router.push('/');\n        },\n        className: \"jsx-3440979688\",\n        children: \"Publish\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: async e => {\n          await deletePost({\n            variables: {\n              postId\n            }\n          });\n          Router.push('/');\n        },\n        className: \"jsx-3440979688\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(_JSXStyle, {\n      id: \"3440979688\",\n      children: \".page.jsx-3440979688{background:white;padding:2rem;}.actions.jsx-3440979688{margin-top:2rem;}button.jsx-3440979688{background:#ececec;border:0;border-radius:0.125rem;padding:1rem 2rem;}button.jsx-3440979688+button.jsx-3440979688{margin-left:1rem;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2pvcmRhbi9ncmFwaHFsLW5leHRqcy9wYWdlcy9wL1tpZF0udHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQTRHa0IsQUFHNEIsQUFLRCxBQUlHLEFBT0YsZ0JBVm5CLENBTGUsQUFnQmYsRUFQVyxTQUNjLEVBVHpCLHFCQVVvQixrQkFDcEIiLCJmaWxlIjoiL2hvbWUvam9yZGFuL2dyYXBocWwtbmV4dGpzL3BhZ2VzL3AvW2lkXS50c3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGF5b3V0IGZyb20gJy4uLy4uL2NvbXBvbmVudHMvTGF5b3V0J1xuaW1wb3J0IFJvdXRlciwgeyB1c2VSb3V0ZXIgfSBmcm9tICduZXh0L3JvdXRlcidcbmltcG9ydCB7IHdpdGhBcG9sbG8gfSBmcm9tICcuLi8uLi9hcG9sbG8vY2xpZW50J1xuaW1wb3J0IGdxbCBmcm9tICdncmFwaHFsLXRhZydcbmltcG9ydCB7IHVzZVF1ZXJ5LCB1c2VNdXRhdGlvbiB9IGZyb20gJ0BhcG9sbG8vcmVhY3QtaG9va3MnXG5cbmNvbnN0IFBvc3RRdWVyeSA9IGdxbGBcbiAgcXVlcnkgUG9zdFF1ZXJ5KCRwb3N0SWQ6IFN0cmluZyEpIHtcbiAgICBwb3N0KHBvc3RJZDogJHBvc3RJZCkge1xuICAgICAgaWRcbiAgICAgIHRpdGxlXG4gICAgICBjb250ZW50XG4gICAgICBwdWJsaXNoZWRcbiAgICAgIGF1dGhvciB7XG4gICAgICAgIGlkXG4gICAgICAgIG5hbWVcbiAgICAgIH1cbiAgICB9XG4gIH1cbmBcblxuY29uc3QgUHVibGlzaE11dGF0aW9uID0gZ3FsYFxuICBtdXRhdGlvbiBQdWJsaXNoTXV0YXRpb24oJHBvc3RJZDogU3RyaW5nISkge1xuICAgIHB1Ymxpc2gocG9zdElkOiAkcG9zdElkKSB7XG4gICAgICBpZFxuICAgICAgdGl0bGVcbiAgICAgIGNvbnRlbnRcbiAgICAgIHB1Ymxpc2hlZFxuICAgICAgYXV0aG9yIHtcbiAgICAgICAgaWRcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIH1cbiAgfVxuYFxuXG5jb25zdCBEZWxldGVNdXRhdGlvbiA9IGdxbGBcbiAgbXV0YXRpb24gRGVsZXRlTXV0YXRpb24oJHBvc3RJZDogU3RyaW5nISkge1xuICAgIGRlbGV0ZVBvc3QocG9zdElkOiAkcG9zdElkKSB7XG4gICAgICBpZFxuICAgICAgdGl0bGVcbiAgICAgIGNvbnRlbnRcbiAgICAgIHB1Ymxpc2hlZFxuICAgICAgYXV0aG9yIHtcbiAgICAgICAgaWRcbiAgICAgICAgbmFtZVxuICAgICAgfVxuICAgIH1cbiAgfVxuYFxuXG5mdW5jdGlvbiBQb3N0KCkge1xuICBjb25zdCBwb3N0SWQgPSB1c2VSb3V0ZXIoKS5xdWVyeS5pZFxuICBjb25zdCB7IGxvYWRpbmcsIGVycm9yLCBkYXRhIH0gPSB1c2VRdWVyeShQb3N0UXVlcnksIHtcbiAgICB2YXJpYWJsZXM6IHsgcG9zdElkIH0sXG4gIH0pXG5cbiAgY29uc3QgW3B1Ymxpc2hdID0gdXNlTXV0YXRpb24oUHVibGlzaE11dGF0aW9uKVxuICBjb25zdCBbZGVsZXRlUG9zdF0gPSB1c2VNdXRhdGlvbihEZWxldGVNdXRhdGlvbilcblxuICBpZiAobG9hZGluZykge1xuICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nJylcbiAgICByZXR1cm4gPGRpdj5Mb2FkaW5nIC4uLjwvZGl2PlxuICB9XG4gIGlmIChlcnJvcikge1xuICAgIGNvbnNvbGUubG9nKCdlcnJvcicpXG4gICAgcmV0dXJuIDxkaXY+RXJyb3I6IHtlcnJvci5tZXNzYWdlfTwvZGl2PlxuICB9XG5cbiAgY29uc29sZS5sb2coYHJlc3BvbnNlYCwgZGF0YSlcblxuICBsZXQgdGl0bGUgPSBkYXRhLnBvc3QudGl0bGVcbiAgaWYgKCFkYXRhLnBvc3QucHVibGlzaGVkKSB7XG4gICAgdGl0bGUgPSBgJHt0aXRsZX0gKERyYWZ0KWBcbiAgfVxuXG4gIGNvbnN0IGF1dGhvck5hbWUgPSBkYXRhLnBvc3QuYXV0aG9yID8gZGF0YS5wb3N0LmF1dGhvci5uYW1lIDogJ1Vua25vd24gYXV0aG9yJ1xuICByZXR1cm4gKFxuICAgIDxMYXlvdXQ+XG4gICAgICA8ZGl2PlxuICAgICAgICA8aDI+e3RpdGxlfTwvaDI+XG4gICAgICAgIDxwPkJ5IHthdXRob3JOYW1lfTwvcD5cbiAgICAgICAgPHA+e2RhdGEucG9zdC5jb250ZW50fTwvcD5cbiAgICAgICAgeyFkYXRhLnBvc3QucHVibGlzaGVkICYmIChcbiAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICBvbkNsaWNrPXthc3luYyBlID0+IHtcbiAgICAgICAgICAgICAgYXdhaXQgcHVibGlzaCh7XG4gICAgICAgICAgICAgICAgdmFyaWFibGVzOiB7XG4gICAgICAgICAgICAgICAgICBwb3N0SWQsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgUm91dGVyLnB1c2goJy8nKVxuICAgICAgICAgICAgfX0+XG4gICAgICAgICAgICBQdWJsaXNoXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICl9XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBvbkNsaWNrPXthc3luYyBlID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGRlbGV0ZVBvc3Qoe1xuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgICAgICAgICBwb3N0SWQsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgUm91dGVyLnB1c2goJy8nKVxuICAgICAgICAgIH19PlxuICAgICAgICAgIERlbGV0ZVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPHN0eWxlIGpzeD57YFxuICAgICAgICAucGFnZSB7XG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgcGFkZGluZzogMnJlbTtcbiAgICAgICAgfVxuXG4gICAgICAgIC5hY3Rpb25zIHtcbiAgICAgICAgICBtYXJnaW4tdG9wOiAycmVtO1xuICAgICAgICB9XG5cbiAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZWNlY2VjO1xuICAgICAgICAgIGJvcmRlcjogMDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwLjEyNXJlbTtcbiAgICAgICAgICBwYWRkaW5nOiAxcmVtIDJyZW07XG4gICAgICAgIH1cblxuICAgICAgICBidXR0b24gKyBidXR0b24ge1xuICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxcmVtO1xuICAgICAgICB9XG4gICAgICBgfTwvc3R5bGU+XG4gICAgPC9MYXlvdXQ+XG4gIClcbn1cblxuZXhwb3J0IGRlZmF1bHQgd2l0aEFwb2xsbyhQb3N0KVxuIl19 */\\n/*@ sourceURL=/home/jordan/graphql-nextjs/pages/p/[id].tsx */\"\n    }, void 0, false, void 0, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n}\n\nexport default withApollo(Post);","map":{"version":3,"sources":["/home/jordan/graphql-nextjs/pages/p/[id].tsx"],"names":["Layout","Router","useRouter","withApollo","gql","useQuery","useMutation","PostQuery","PublishMutation","DeleteMutation","Post","postId","query","id","loading","error","data","variables","publish","deletePost","console","log","message","title","post","published","authorName","author","name","content","e","push"],"mappings":"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","sourcesContent":["import Layout from '../../components/Layout'\nimport Router, { useRouter } from 'next/router'\nimport { withApollo } from '../../apollo/client'\nimport gql from 'graphql-tag'\nimport { useQuery, useMutation } from '@apollo/react-hooks'\n\nconst PostQuery = gql`\n  query PostQuery($postId: String!) {\n    post(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`\n\nconst PublishMutation = gql`\n  mutation PublishMutation($postId: String!) {\n    publish(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`\n\nconst DeleteMutation = gql`\n  mutation DeleteMutation($postId: String!) {\n    deletePost(postId: $postId) {\n      id\n      title\n      content\n      published\n      author {\n        id\n        name\n      }\n    }\n  }\n`\n\nfunction Post() {\n  const postId = useRouter().query.id\n  const { loading, error, data } = useQuery(PostQuery, {\n    variables: { postId },\n  })\n\n  const [publish] = useMutation(PublishMutation)\n  const [deletePost] = useMutation(DeleteMutation)\n\n  if (loading) {\n    console.log('loading')\n    return <div>Loading ...</div>\n  }\n  if (error) {\n    console.log('error')\n    return <div>Error: {error.message}</div>\n  }\n\n  console.log(`response`, data)\n\n  let title = data.post.title\n  if (!data.post.published) {\n    title = `${title} (Draft)`\n  }\n\n  const authorName = data.post.author ? data.post.author.name : 'Unknown author'\n  return (\n    <Layout>\n      <div>\n        <h2>{title}</h2>\n        <p>By {authorName}</p>\n        <p>{data.post.content}</p>\n        {!data.post.published && (\n          <button\n            onClick={async e => {\n              await publish({\n                variables: {\n                  postId,\n                },\n              })\n              Router.push('/')\n            }}>\n            Publish\n          </button>\n        )}\n        <button\n          onClick={async e => {\n            await deletePost({\n              variables: {\n                postId,\n              },\n            })\n            Router.push('/')\n          }}>\n          Delete\n        </button>\n      </div>\n      <style jsx>{`\n        .page {\n          background: white;\n          padding: 2rem;\n        }\n\n        .actions {\n          margin-top: 2rem;\n        }\n\n        button {\n          background: #ececec;\n          border: 0;\n          border-radius: 0.125rem;\n          padding: 1rem 2rem;\n        }\n\n        button + button {\n          margin-left: 1rem;\n        }\n      `}</style>\n    </Layout>\n  )\n}\n\nexport default withApollo(Post)\n"]},"metadata":{},"sourceType":"module"}